<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"> <style>
	.KEYW {color: #933;}
	.COMM {color: #bbb; font-style: italic;}
	.NUMB {color: #393;}
	.STRN {color: #393;}
	.REGX {color: #339;}
	.linenumber {border-right: 1px dotted #666; color: #666; font-style: normal;}
	</style></head><body><pre><span class='linenumber'>  1</span> <span class="COMM">/**
<span class='linenumber'>  2</span>  * SWFUpload: http://www.swfupload.org, http://swfupload.googlecode.com
<span class='linenumber'>  3</span>  *
<span class='linenumber'>  4</span>  * mmSWFUpload 1.0: Flash upload dialog - http://profandesign.se/swfupload/,  http://www.vinterwebb.se/
<span class='linenumber'>  5</span>  *
<span class='linenumber'>  6</span>  * SWFUpload is (c) 2006-2007 Lars Huring, Olov Nilzï¿½n and Mammon Media and is released under the MIT License:
<span class='linenumber'>  7</span>  * http://www.opensource.org/licenses/mit-license.php
<span class='linenumber'>  8</span>  *
<span class='linenumber'>  9</span>  * SWFUpload 2 is (c) 2007-2008 Jake Roberts and is released under the MIT License:
<span class='linenumber'> 10</span>  * http://www.opensource.org/licenses/mit-license.php
<span class='linenumber'> 11</span>  *
<span class='linenumber'> 12</span>  */</span><span class="WHIT">
<span class='linenumber'> 13</span> 
<span class='linenumber'> 14</span> 
<span class='linenumber'> 15</span> </span><span class="COMM">/* ******************* */</span><span class="WHIT">
<span class='linenumber'> 16</span> </span><span class="COMM">/* Constructor & Init  */</span><span class="WHIT">
<span class='linenumber'> 17</span> </span><span class="COMM">/* ******************* */</span><span class="WHIT">
<span class='linenumber'> 18</span> </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">SWFUpload</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 19</span> 
<span class='linenumber'> 20</span> </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">SWFUpload</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="NAME">undefined</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 21</span> </span><span class="WHIT">	</span><span class="NAME">SWFUpload</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">settings</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 22</span> </span><span class="WHIT">		</span><span class="NAME">this.initSWFUpload</span><span class="PUNC">(</span><span class="NAME">settings</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 23</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 24</span> </span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'> 25</span> 
<span class='linenumber'> 26</span> </span><span class="NAME">SWFUpload.prototype.initSWFUpload</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">settings</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 27</span> </span><span class="WHIT">	</span><span class="KEYW">try</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 28</span> </span><span class="WHIT">		</span><span class="NAME">this.customSettings</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">	</span><span class="COMM">// A container where developers can place their own settings associated with this instance.</span><span class="WHIT">
<span class='linenumber'> 29</span> </span><span class="WHIT">		</span><span class="NAME">this.settings</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">settings</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 30</span> </span><span class="WHIT">		</span><span class="NAME">this.eventQueue</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 31</span> </span><span class="WHIT">		</span><span class="NAME">this.movieName</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">"SWFUpload_"</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">SWFUpload.movieCount</span><span class="PUNC">++</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 32</span> </span><span class="WHIT">		</span><span class="NAME">this.movieElement</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 33</span> 
<span class='linenumber'> 34</span> 
<span class='linenumber'> 35</span> </span><span class="WHIT">		</span><span class="COMM">// Setup global control tracking</span><span class="WHIT">
<span class='linenumber'> 36</span> </span><span class="WHIT">		</span><span class="NAME">SWFUpload.instances</span><span class="PUNC">[</span><span class="NAME">this.movieName</span><span class="PUNC">]</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 37</span> 
<span class='linenumber'> 38</span> </span><span class="WHIT">		</span><span class="COMM">// Load the settings.  Load the Flash movie.</span><span class="WHIT">
<span class='linenumber'> 39</span> </span><span class="WHIT">		</span><span class="NAME">this.initSettings</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 40</span> </span><span class="WHIT">		</span><span class="NAME">this.loadFlash</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 41</span> </span><span class="WHIT">		</span><span class="NAME">this.displayDebugInfo</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 42</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">catch</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">ex</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 43</span> </span><span class="WHIT">		</span><span class="KEYW">delete</span><span class="WHIT"> </span><span class="NAME">SWFUpload.instances</span><span class="PUNC">[</span><span class="NAME">this.movieName</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 44</span> </span><span class="WHIT">		</span><span class="KEYW">throw</span><span class="WHIT"> </span><span class="NAME">ex</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 45</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'> 46</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 47</span> 
<span class='linenumber'> 48</span> </span><span class="COMM">/* *************** */</span><span class="WHIT">
<span class='linenumber'> 49</span> </span><span class="COMM">/* Static Members  */</span><span class="WHIT">
<span class='linenumber'> 50</span> </span><span class="COMM">/* *************** */</span><span class="WHIT">
<span class='linenumber'> 51</span> </span><span class="NAME">SWFUpload.instances</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 52</span> </span><span class="NAME">SWFUpload.movieCount</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 53</span> </span><span class="NAME">SWFUpload.version</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">"2.2.0 Beta 5 2008-01-29"</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 54</span> </span><span class="NAME">SWFUpload.QUEUE_ERROR</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 55</span> </span><span class="WHIT">	</span><span class="NAME">QUEUE_LIMIT_EXCEEDED</span><span class="WHIT">	  		</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="NUMB">100</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 56</span> </span><span class="WHIT">	</span><span class="NAME">FILE_EXCEEDS_SIZE_LIMIT</span><span class="WHIT">  		</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="NUMB">110</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 57</span> </span><span class="WHIT">	</span><span class="NAME">ZERO_BYTE_FILE</span><span class="WHIT">			  		</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="NUMB">120</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 58</span> </span><span class="WHIT">	</span><span class="NAME">INVALID_FILETYPE</span><span class="WHIT">		  		</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="NUMB">130</span><span class="WHIT">
<span class='linenumber'> 59</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 60</span> </span><span class="NAME">SWFUpload.UPLOAD_ERROR</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 61</span> </span><span class="WHIT">	</span><span class="NAME">HTTP_ERROR</span><span class="WHIT">				  		</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="NUMB">200</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 62</span> </span><span class="WHIT">	</span><span class="NAME">MISSING_UPLOAD_URL</span><span class="WHIT">	      		</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="NUMB">210</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 63</span> </span><span class="WHIT">	</span><span class="NAME">IO_ERROR</span><span class="WHIT">				  		</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="NUMB">220</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 64</span> </span><span class="WHIT">	</span><span class="NAME">SECURITY_ERROR</span><span class="WHIT">			  		</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="NUMB">230</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 65</span> </span><span class="WHIT">	</span><span class="NAME">UPLOAD_LIMIT_EXCEEDED</span><span class="WHIT">	  		</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="NUMB">240</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 66</span> </span><span class="WHIT">	</span><span class="NAME">UPLOAD_FAILED</span><span class="WHIT">			  		</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="NUMB">250</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 67</span> </span><span class="WHIT">	</span><span class="NAME">SPECIFIED_FILE_ID_NOT_FOUND</span><span class="WHIT">		</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="NUMB">260</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 68</span> </span><span class="WHIT">	</span><span class="NAME">FILE_VALIDATION_FAILED</span><span class="WHIT">	  		</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="NUMB">270</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 69</span> </span><span class="WHIT">	</span><span class="NAME">FILE_CANCELLED</span><span class="WHIT">			  		</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="NUMB">280</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 70</span> </span><span class="WHIT">	</span><span class="NAME">UPLOAD_STOPPED</span><span class="WHIT">					</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="NUMB">290</span><span class="WHIT">
<span class='linenumber'> 71</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 72</span> </span><span class="NAME">SWFUpload.FILE_STATUS</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 73</span> </span><span class="WHIT">	</span><span class="NAME">QUEUED</span><span class="WHIT">		 </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 74</span> </span><span class="WHIT">	</span><span class="NAME">IN_PROGRESS</span><span class="WHIT">	 </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="NUMB">2</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 75</span> </span><span class="WHIT">	</span><span class="NAME">ERROR</span><span class="WHIT">		 </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="NUMB">3</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 76</span> </span><span class="WHIT">	</span><span class="NAME">COMPLETE</span><span class="WHIT">	 </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="NUMB">4</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 77</span> </span><span class="WHIT">	</span><span class="NAME">CANCELLED</span><span class="WHIT">	 </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="NUMB">5</span><span class="WHIT">
<span class='linenumber'> 78</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 79</span> </span><span class="NAME">SWFUpload.BUTTON_ACTION</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 80</span> </span><span class="WHIT">	</span><span class="NAME">SELECT_FILE</span><span class="WHIT">  </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="NUMB">100</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 81</span> </span><span class="WHIT">	</span><span class="NAME">SELECT_FILES</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="NUMB">110</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 82</span> </span><span class="WHIT">	</span><span class="NAME">START_UPLOAD</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="NUMB">120</span><span class="WHIT">
<span class='linenumber'> 83</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 84</span> </span><span class="NAME">SWFUpload.CURSOR</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 85</span> </span><span class="WHIT">	</span><span class="NAME">ARROW</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 86</span> </span><span class="WHIT">	</span><span class="NAME">HAND</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="NUMB">2</span><span class="WHIT">
<span class='linenumber'> 87</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 88</span> </span><span class="NAME">SWFUpload.WINDOW_MODE</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'> 89</span> </span><span class="WHIT">	</span><span class="NAME">WINDOW</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">"window"</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 90</span> </span><span class="WHIT">	</span><span class="NAME">TRANSPARENT</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">"transparent"</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'> 91</span> </span><span class="WHIT">	</span><span class="NAME">OPAQUE</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">"opaque"</span><span class="WHIT">
<span class='linenumber'> 92</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'> 93</span> 
<span class='linenumber'> 94</span> </span><span class="COMM">/* ******************** */</span><span class="WHIT">
<span class='linenumber'> 95</span> </span><span class="COMM">/* Instance Members  */</span><span class="WHIT">
<span class='linenumber'> 96</span> </span><span class="COMM">/* ******************** */</span><span class="WHIT">
<span class='linenumber'> 97</span> 
<span class='linenumber'> 98</span> </span><span class="COMM">// Private: initSettings ensures that all the</span><span class="WHIT">
<span class='linenumber'> 99</span> </span><span class="COMM">// settings are set, getting a default value if one was not assigned.</span><span class="WHIT">
<span class='linenumber'>100</span> </span><span class="NAME">SWFUpload.prototype.initSettings</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>101</span> </span><span class="WHIT">	</span><span class="NAME">this.ensureDefault</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">settingName</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">defaultValue</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>102</span> </span><span class="WHIT">		</span><span class="NAME">this.settings</span><span class="PUNC">[</span><span class="NAME">settingName</span><span class="PUNC">]</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this.settings</span><span class="PUNC">[</span><span class="NAME">settingName</span><span class="PUNC">]</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="NAME">undefined</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="NAME">defaultValue</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">this.settings</span><span class="PUNC">[</span><span class="NAME">settingName</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>103</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>104</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='linenumber'>105</span> </span><span class="WHIT">	</span><span class="COMM">// Upload backend settings</span><span class="WHIT">
<span class='linenumber'>106</span> </span><span class="WHIT">	</span><span class="NAME">this.ensureDefault</span><span class="PUNC">(</span><span class="STRN">"upload_url"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">""</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>107</span> </span><span class="WHIT">	</span><span class="NAME">this.ensureDefault</span><span class="PUNC">(</span><span class="STRN">"file_post_name"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"Filedata"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>108</span> </span><span class="WHIT">	</span><span class="NAME">this.ensureDefault</span><span class="PUNC">(</span><span class="STRN">"post_params"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>109</span> </span><span class="WHIT">	</span><span class="NAME">this.ensureDefault</span><span class="PUNC">(</span><span class="STRN">"use_query_string"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>110</span> </span><span class="WHIT">	</span><span class="NAME">this.ensureDefault</span><span class="PUNC">(</span><span class="STRN">"requeue_on_error"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>111</span> </span><span class="WHIT">	</span><span class="NAME">this.ensureDefault</span><span class="PUNC">(</span><span class="STRN">"http_success"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>112</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='linenumber'>113</span> </span><span class="WHIT">	</span><span class="COMM">// File Settings</span><span class="WHIT">
<span class='linenumber'>114</span> </span><span class="WHIT">	</span><span class="NAME">this.ensureDefault</span><span class="PUNC">(</span><span class="STRN">"file_types"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"*.*"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>115</span> </span><span class="WHIT">	</span><span class="NAME">this.ensureDefault</span><span class="PUNC">(</span><span class="STRN">"file_types_description"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"All Files"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>116</span> </span><span class="WHIT">	</span><span class="NAME">this.ensureDefault</span><span class="PUNC">(</span><span class="STRN">"file_size_limit"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">	</span><span class="COMM">// Default zero means "unlimited"</span><span class="WHIT">
<span class='linenumber'>117</span> </span><span class="WHIT">	</span><span class="NAME">this.ensureDefault</span><span class="PUNC">(</span><span class="STRN">"file_upload_limit"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>118</span> </span><span class="WHIT">	</span><span class="NAME">this.ensureDefault</span><span class="PUNC">(</span><span class="STRN">"file_queue_limit"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>119</span> 
<span class='linenumber'>120</span> </span><span class="WHIT">	</span><span class="COMM">// Flash Settings</span><span class="WHIT">
<span class='linenumber'>121</span> </span><span class="WHIT">	</span><span class="NAME">this.ensureDefault</span><span class="PUNC">(</span><span class="STRN">"flash_url"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"swfupload.swf"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>122</span> </span><span class="WHIT">	</span><span class="NAME">this.ensureDefault</span><span class="PUNC">(</span><span class="STRN">"prevent_swf_caching"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>123</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='linenumber'>124</span> </span><span class="WHIT">	</span><span class="COMM">// Button Settings</span><span class="WHIT">
<span class='linenumber'>125</span> </span><span class="WHIT">	</span><span class="NAME">this.ensureDefault</span><span class="PUNC">(</span><span class="STRN">"button_image_url"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">""</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>126</span> </span><span class="WHIT">	</span><span class="NAME">this.ensureDefault</span><span class="PUNC">(</span><span class="STRN">"button_width"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>127</span> </span><span class="WHIT">	</span><span class="NAME">this.ensureDefault</span><span class="PUNC">(</span><span class="STRN">"button_height"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>128</span> </span><span class="WHIT">	</span><span class="NAME">this.ensureDefault</span><span class="PUNC">(</span><span class="STRN">"button_text"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">""</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>129</span> </span><span class="WHIT">	</span><span class="NAME">this.ensureDefault</span><span class="PUNC">(</span><span class="STRN">"button_text_style"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"color: #000000; font-size: 16pt;"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>130</span> </span><span class="WHIT">	</span><span class="NAME">this.ensureDefault</span><span class="PUNC">(</span><span class="STRN">"button_text_top_padding"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>131</span> </span><span class="WHIT">	</span><span class="NAME">this.ensureDefault</span><span class="PUNC">(</span><span class="STRN">"button_text_left_padding"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>132</span> </span><span class="WHIT">	</span><span class="NAME">this.ensureDefault</span><span class="PUNC">(</span><span class="STRN">"button_action"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">SWFUpload.BUTTON_ACTION.SELECT_FILES</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>133</span> </span><span class="WHIT">	</span><span class="NAME">this.ensureDefault</span><span class="PUNC">(</span><span class="STRN">"button_disabled"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>134</span> </span><span class="WHIT">	</span><span class="NAME">this.ensureDefault</span><span class="PUNC">(</span><span class="STRN">"button_placeholder_id"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">""</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>135</span> </span><span class="WHIT">	</span><span class="NAME">this.ensureDefault</span><span class="PUNC">(</span><span class="STRN">"button_cursor"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">SWFUpload.CURSOR.ARROW</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>136</span> </span><span class="WHIT">	</span><span class="NAME">this.ensureDefault</span><span class="PUNC">(</span><span class="STRN">"button_window_mode"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">SWFUpload.WINDOW_MODE.WINDOW</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>137</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='linenumber'>138</span> </span><span class="WHIT">	</span><span class="COMM">// Debug Settings</span><span class="WHIT">
<span class='linenumber'>139</span> </span><span class="WHIT">	</span><span class="NAME">this.ensureDefault</span><span class="PUNC">(</span><span class="STRN">"debug"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>140</span> </span><span class="WHIT">	</span><span class="NAME">this.settings.debug_enabled</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.settings.debug</span><span class="PUNC">;</span><span class="WHIT">	</span><span class="COMM">// Here to maintain v2 API</span><span class="WHIT">
<span class='linenumber'>141</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='linenumber'>142</span> </span><span class="WHIT">	</span><span class="COMM">// Event Handlers</span><span class="WHIT">
<span class='linenumber'>143</span> </span><span class="WHIT">	</span><span class="NAME">this.settings.return_upload_start_handler</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.returnUploadStart</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>144</span> </span><span class="WHIT">	</span><span class="NAME">this.ensureDefault</span><span class="PUNC">(</span><span class="STRN">"swfupload_loaded_handler"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>145</span> </span><span class="WHIT">	</span><span class="NAME">this.ensureDefault</span><span class="PUNC">(</span><span class="STRN">"file_dialog_start_handler"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>146</span> </span><span class="WHIT">	</span><span class="NAME">this.ensureDefault</span><span class="PUNC">(</span><span class="STRN">"file_queued_handler"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>147</span> </span><span class="WHIT">	</span><span class="NAME">this.ensureDefault</span><span class="PUNC">(</span><span class="STRN">"file_queue_error_handler"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>148</span> </span><span class="WHIT">	</span><span class="NAME">this.ensureDefault</span><span class="PUNC">(</span><span class="STRN">"file_dialog_complete_handler"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>149</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='linenumber'>150</span> </span><span class="WHIT">	</span><span class="NAME">this.ensureDefault</span><span class="PUNC">(</span><span class="STRN">"upload_start_handler"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>151</span> </span><span class="WHIT">	</span><span class="NAME">this.ensureDefault</span><span class="PUNC">(</span><span class="STRN">"upload_progress_handler"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>152</span> </span><span class="WHIT">	</span><span class="NAME">this.ensureDefault</span><span class="PUNC">(</span><span class="STRN">"upload_error_handler"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>153</span> </span><span class="WHIT">	</span><span class="NAME">this.ensureDefault</span><span class="PUNC">(</span><span class="STRN">"upload_success_handler"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>154</span> </span><span class="WHIT">	</span><span class="NAME">this.ensureDefault</span><span class="PUNC">(</span><span class="STRN">"upload_complete_handler"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>155</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='linenumber'>156</span> </span><span class="WHIT">	</span><span class="NAME">this.ensureDefault</span><span class="PUNC">(</span><span class="STRN">"debug_handler"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this.debugMessage</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>157</span> 
<span class='linenumber'>158</span> </span><span class="WHIT">	</span><span class="NAME">this.ensureDefault</span><span class="PUNC">(</span><span class="STRN">"custom_settings"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>159</span> 
<span class='linenumber'>160</span> </span><span class="WHIT">	</span><span class="COMM">// Other settings</span><span class="WHIT">
<span class='linenumber'>161</span> </span><span class="WHIT">	</span><span class="NAME">this.customSettings</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.settings.custom_settings</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>162</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='linenumber'>163</span> </span><span class="WHIT">	</span><span class="COMM">// Update the flash url if needed</span><span class="WHIT">
<span class='linenumber'>164</span> </span><span class="WHIT">	</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="PUNC">!</span><span class="NAME">this.settings.prevent_swf_caching</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>165</span> </span><span class="WHIT">		</span><span class="NAME">this.settings.flash_url</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.settings.flash_url</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this.settings.flash_url.indexOf</span><span class="PUNC">(</span><span class="STRN">"?"</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">&lt;</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="STRN">"?"</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">"&"</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="STRN">"preventswfcaching="</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Date</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">getTime</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>166</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>167</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='linenumber'>168</span> </span><span class="WHIT">	</span><span class="KEYW">delete</span><span class="WHIT"> </span><span class="NAME">this.ensureDefault</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>169</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>170</span> 
<span class='linenumber'>171</span> </span><span class="COMM">// Private: loadFlash replaces the button_placeholder element with the flash movie.</span><span class="WHIT">
<span class='linenumber'>172</span> </span><span class="NAME">SWFUpload.prototype.loadFlash</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>173</span> </span><span class="WHIT">	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">targetElement</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">tempParent</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>174</span> 
<span class='linenumber'>175</span> </span><span class="WHIT">	</span><span class="COMM">// Make sure an element with the ID we are going to use doesn't already exist</span><span class="WHIT">
<span class='linenumber'>176</span> </span><span class="WHIT">	</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">document.getElementById</span><span class="PUNC">(</span><span class="NAME">this.movieName</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">!==</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>177</span> </span><span class="WHIT">		</span><span class="KEYW">throw</span><span class="WHIT"> </span><span class="STRN">"ID "</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">this.movieName</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="STRN">" is already in use. The Flash Object could not be added"</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>178</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>179</span> 
<span class='linenumber'>180</span> </span><span class="WHIT">	</span><span class="COMM">// Get the element where we will be placing the flash movie</span><span class="WHIT">
<span class='linenumber'>181</span> </span><span class="WHIT">	</span><span class="NAME">targetElement</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">document.getElementById</span><span class="PUNC">(</span><span class="NAME">this.settings.button_placeholder_id</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>182</span> 
<span class='linenumber'>183</span> </span><span class="WHIT">	</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">targetElement</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="NAME">undefined</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>184</span> </span><span class="WHIT">		</span><span class="KEYW">throw</span><span class="WHIT"> </span><span class="STRN">"Could not find the placeholder element: "</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">this.settings.button_placeholder_id</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>185</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>186</span> 
<span class='linenumber'>187</span> </span><span class="WHIT">	</span><span class="COMM">// Append the container and load the flash</span><span class="WHIT">
<span class='linenumber'>188</span> </span><span class="WHIT">	</span><span class="NAME">tempParent</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">document.createElement</span><span class="PUNC">(</span><span class="STRN">"div"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>189</span> </span><span class="WHIT">	</span><span class="NAME">tempParent.innerHTML</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.getFlashHTML</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">	</span><span class="COMM">// Using innerHTML is non-standard but the only sensible way to dynamically add Flash in IE (and maybe other browsers)</span><span class="WHIT">
<span class='linenumber'>190</span> </span><span class="WHIT">	</span><span class="NAME">targetElement.parentNode.replaceChild</span><span class="PUNC">(</span><span class="NAME">tempParent.firstChild</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">targetElement</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>191</span> 
<span class='linenumber'>192</span> </span><span class="WHIT">	</span><span class="COMM">// Fix IE Flash/Form bug</span><span class="WHIT">
<span class='linenumber'>193</span> </span><span class="WHIT">	</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">window</span><span class="PUNC">[</span><span class="NAME">this.movieName</span><span class="PUNC">]</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="NAME">undefined</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>194</span> </span><span class="WHIT">		</span><span class="NAME">window</span><span class="PUNC">[</span><span class="NAME">this.movieName</span><span class="PUNC">]</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.getMovieElement</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>195</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>196</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='linenumber'>197</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>198</span> 
<span class='linenumber'>199</span> </span><span class="COMM">// Private: getFlashHTML generates the object tag needed to embed the flash in to the document</span><span class="WHIT">
<span class='linenumber'>200</span> </span><span class="NAME">SWFUpload.prototype.getFlashHTML</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>201</span> </span><span class="WHIT">	</span><span class="COMM">// Flash Satay object syntax: http://www.alistapart.com/articles/flashsatay</span><span class="WHIT">
<span class='linenumber'>202</span> </span><span class="WHIT">	</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="STRN">'&lt;object id="'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this.movieName</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">'" type="application/x-shockwave-flash" data="'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this.settings.flash_url</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">'" width="'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this.settings.button_width</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">'" height="'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this.settings.button_height</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">'" class="swfupload">'</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>203</span> </span><span class="WHIT">				</span><span class="STRN">'&lt;param name="wmode" value="'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this.settings.button_window_mode</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">'" />'</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>204</span> </span><span class="WHIT">				</span><span class="STRN">'&lt;param name="movie" value="'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this.settings.flash_url</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">'" />'</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>205</span> </span><span class="WHIT">				</span><span class="STRN">'&lt;param name="quality" value="high" />'</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>206</span> </span><span class="WHIT">				</span><span class="STRN">'&lt;param name="menu" value="false" />'</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>207</span> </span><span class="WHIT">				</span><span class="STRN">'&lt;param name="allowScriptAccess" value="always" />'</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>208</span> </span><span class="WHIT">				</span><span class="STRN">'&lt;param name="flashvars" value="'</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">this.getFlashVars</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="STRN">'" />'</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>209</span> </span><span class="WHIT">				</span><span class="STRN">'&lt;/object>'</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">join</span><span class="PUNC">(</span><span class="STRN">""</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>210</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>211</span> 
<span class='linenumber'>212</span> </span><span class="COMM">// Private: getFlashVars builds the parameter string that will be passed</span><span class="WHIT">
<span class='linenumber'>213</span> </span><span class="COMM">// to flash in the flashvars param.</span><span class="WHIT">
<span class='linenumber'>214</span> </span><span class="NAME">SWFUpload.prototype.getFlashVars</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>215</span> </span><span class="WHIT">	</span><span class="COMM">// Build a string from the post param object</span><span class="WHIT">
<span class='linenumber'>216</span> </span><span class="WHIT">	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">paramString</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.buildParamString</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>217</span> </span><span class="WHIT">	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">httpSuccessString</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.settings.http_success.join</span><span class="PUNC">(</span><span class="STRN">","</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>218</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='linenumber'>219</span> </span><span class="WHIT">	</span><span class="COMM">// Build the parameter string</span><span class="WHIT">
<span class='linenumber'>220</span> </span><span class="WHIT">	</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="STRN">"movieName="</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">encodeURIComponent</span><span class="PUNC">(</span><span class="NAME">this.movieName</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>221</span> </span><span class="WHIT">			</span><span class="STRN">"&amp;uploadURL="</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">encodeURIComponent</span><span class="PUNC">(</span><span class="NAME">this.settings.upload_url</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>222</span> </span><span class="WHIT">			</span><span class="STRN">"&amp;useQueryString="</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">encodeURIComponent</span><span class="PUNC">(</span><span class="NAME">this.settings.use_query_string</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>223</span> </span><span class="WHIT">			</span><span class="STRN">"&amp;requeueOnError="</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">encodeURIComponent</span><span class="PUNC">(</span><span class="NAME">this.settings.requeue_on_error</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>224</span> </span><span class="WHIT">			</span><span class="STRN">"&amp;httpSuccess="</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">encodeURIComponent</span><span class="PUNC">(</span><span class="NAME">httpSuccessString</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>225</span> </span><span class="WHIT">			</span><span class="STRN">"&amp;params="</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">encodeURIComponent</span><span class="PUNC">(</span><span class="NAME">paramString</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>226</span> </span><span class="WHIT">			</span><span class="STRN">"&amp;filePostName="</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">encodeURIComponent</span><span class="PUNC">(</span><span class="NAME">this.settings.file_post_name</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>227</span> </span><span class="WHIT">			</span><span class="STRN">"&amp;fileTypes="</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">encodeURIComponent</span><span class="PUNC">(</span><span class="NAME">this.settings.file_types</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>228</span> </span><span class="WHIT">			</span><span class="STRN">"&amp;fileTypesDescription="</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">encodeURIComponent</span><span class="PUNC">(</span><span class="NAME">this.settings.file_types_description</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>229</span> </span><span class="WHIT">			</span><span class="STRN">"&amp;fileSizeLimit="</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">encodeURIComponent</span><span class="PUNC">(</span><span class="NAME">this.settings.file_size_limit</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>230</span> </span><span class="WHIT">			</span><span class="STRN">"&amp;fileUploadLimit="</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">encodeURIComponent</span><span class="PUNC">(</span><span class="NAME">this.settings.file_upload_limit</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>231</span> </span><span class="WHIT">			</span><span class="STRN">"&amp;fileQueueLimit="</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">encodeURIComponent</span><span class="PUNC">(</span><span class="NAME">this.settings.file_queue_limit</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>232</span> </span><span class="WHIT">			</span><span class="STRN">"&amp;debugEnabled="</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">encodeURIComponent</span><span class="PUNC">(</span><span class="NAME">this.settings.debug_enabled</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>233</span> </span><span class="WHIT">			</span><span class="STRN">"&amp;buttonImageURL="</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">encodeURIComponent</span><span class="PUNC">(</span><span class="NAME">this.settings.button_image_url</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>234</span> </span><span class="WHIT">			</span><span class="STRN">"&amp;buttonWidth="</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">encodeURIComponent</span><span class="PUNC">(</span><span class="NAME">this.settings.button_width</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>235</span> </span><span class="WHIT">			</span><span class="STRN">"&amp;buttonHeight="</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">encodeURIComponent</span><span class="PUNC">(</span><span class="NAME">this.settings.button_height</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>236</span> </span><span class="WHIT">			</span><span class="STRN">"&amp;buttonText="</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">encodeURIComponent</span><span class="PUNC">(</span><span class="NAME">this.settings.button_text</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>237</span> </span><span class="WHIT">			</span><span class="STRN">"&amp;buttonTextTopPadding="</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">encodeURIComponent</span><span class="PUNC">(</span><span class="NAME">this.settings.button_text_top_padding</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>238</span> </span><span class="WHIT">			</span><span class="STRN">"&amp;buttonTextLeftPadding="</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">encodeURIComponent</span><span class="PUNC">(</span><span class="NAME">this.settings.button_text_left_padding</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>239</span> </span><span class="WHIT">			</span><span class="STRN">"&amp;buttonTextStyle="</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">encodeURIComponent</span><span class="PUNC">(</span><span class="NAME">this.settings.button_text_style</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>240</span> </span><span class="WHIT">			</span><span class="STRN">"&amp;buttonAction="</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">encodeURIComponent</span><span class="PUNC">(</span><span class="NAME">this.settings.button_action</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>241</span> </span><span class="WHIT">			</span><span class="STRN">"&amp;buttonDisabled="</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">encodeURIComponent</span><span class="PUNC">(</span><span class="NAME">this.settings.button_disabled</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>242</span> </span><span class="WHIT">			</span><span class="STRN">"&amp;buttonCursor="</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">encodeURIComponent</span><span class="PUNC">(</span><span class="NAME">this.settings.button_cursor</span><span class="PUNC">)</span><span class="WHIT">
<span class='linenumber'>243</span> </span><span class="WHIT">		</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">join</span><span class="PUNC">(</span><span class="STRN">""</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>244</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>245</span> 
<span class='linenumber'>246</span> </span><span class="COMM">// Public: getMovieElement retrieves the DOM reference to the Flash element added by SWFUpload</span><span class="WHIT">
<span class='linenumber'>247</span> </span><span class="COMM">// The element is cached after the first lookup</span><span class="WHIT">
<span class='linenumber'>248</span> </span><span class="NAME">SWFUpload.prototype.getMovieElement</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>249</span> </span><span class="WHIT">	</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this.movieElement</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="NAME">undefined</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>250</span> </span><span class="WHIT">		</span><span class="NAME">this.movieElement</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">document.getElementById</span><span class="PUNC">(</span><span class="NAME">this.movieName</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>251</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>252</span> 
<span class='linenumber'>253</span> </span><span class="WHIT">	</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this.movieElement</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>254</span> </span><span class="WHIT">		</span><span class="KEYW">throw</span><span class="WHIT"> </span><span class="STRN">"Could not find Flash element"</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>255</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>256</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='linenumber'>257</span> </span><span class="WHIT">	</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.movieElement</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>258</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>259</span> 
<span class='linenumber'>260</span> </span><span class="COMM">// Private: buildParamString takes the name/value pairs in the post_params setting object</span><span class="WHIT">
<span class='linenumber'>261</span> </span><span class="COMM">// and joins them up in to a string formatted "name=value&amp;name=value"</span><span class="WHIT">
<span class='linenumber'>262</span> </span><span class="NAME">SWFUpload.prototype.buildParamString</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>263</span> </span><span class="WHIT">	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">postParams</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.settings.post_params</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="WHIT">
<span class='linenumber'>264</span> </span><span class="WHIT">	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">paramStringPairs</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>265</span> 
<span class='linenumber'>266</span> </span><span class="WHIT">	</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="KEYW">typeof</span><span class="PUNC">(</span><span class="NAME">postParams</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="STRN">"object"</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>267</span> </span><span class="WHIT">		</span><span class="KEYW">for</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">name</span><span class="WHIT"> </span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">postParams</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>268</span> </span><span class="WHIT">			</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">postParams.hasOwnProperty</span><span class="PUNC">(</span><span class="NAME">name</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>269</span> </span><span class="WHIT">				</span><span class="NAME">paramStringPairs.push</span><span class="PUNC">(</span><span class="NAME">encodeURIComponent</span><span class="PUNC">(</span><span class="NAME">name.toString</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="STRN">"="</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">encodeURIComponent</span><span class="PUNC">(</span><span class="NAME">postParams</span><span class="PUNC">[</span><span class="NAME">name</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">toString</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>270</span> </span><span class="WHIT">			</span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>271</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>272</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>273</span> 
<span class='linenumber'>274</span> </span><span class="WHIT">	</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">paramStringPairs.join</span><span class="PUNC">(</span><span class="STRN">"&amp;"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>275</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>276</span> 
<span class='linenumber'>277</span> </span><span class="COMM">// Public: Used to remove a SWFUpload instance from the page. This method strives to remove</span><span class="WHIT">
<span class='linenumber'>278</span> </span><span class="COMM">// all references to the SWF, and other objects so memory is properly freed.</span><span class="WHIT">
<span class='linenumber'>279</span> </span><span class="COMM">// Returns true if everything was destroyed. Returns a false if a failure occurs leaving SWFUpload in an inconsistant state.</span><span class="WHIT">
<span class='linenumber'>280</span> </span><span class="COMM">// Credits: Major improvements provided by steffen</span><span class="WHIT">
<span class='linenumber'>281</span> </span><span class="NAME">SWFUpload.prototype.destroy</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>282</span> </span><span class="WHIT">	</span><span class="KEYW">try</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>283</span> </span><span class="WHIT">		</span><span class="COMM">// Make sure Flash is done before we try to remove it</span><span class="WHIT">
<span class='linenumber'>284</span> </span><span class="WHIT">		</span><span class="NAME">this.cancelUpload</span><span class="PUNC">(</span><span class="KEYW">null</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>285</span> </span><span class="WHIT">		</span><span class="WHIT">
<span class='linenumber'>286</span> 
<span class='linenumber'>287</span> </span><span class="WHIT">		</span><span class="COMM">// Remove the SWFUpload DOM nodes</span><span class="WHIT">
<span class='linenumber'>288</span> </span><span class="WHIT">		</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">movieElement</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>289</span> </span><span class="WHIT">		</span><span class="NAME">movieElement</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.getMovieElement</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>290</span> </span><span class="WHIT">		</span><span class="WHIT">
<span class='linenumber'>291</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">movieElement</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="KEYW">typeof</span><span class="PUNC">(</span><span class="NAME">movieElement.CallFunction</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="STRN">"unknown"</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT"> </span><span class="COMM">// We only want to do this in IE</span><span class="WHIT">
<span class='linenumber'>292</span> </span><span class="WHIT">			</span><span class="COMM">// Loop through all the movie's properties and remove all function references (DOM/JS IE 6/7 memory leak workaround)</span><span class="WHIT">
<span class='linenumber'>293</span> </span><span class="WHIT">			</span><span class="KEYW">for</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="WHIT"> </span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">movieElement</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>294</span> </span><span class="WHIT">				</span><span class="KEYW">try</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>295</span> </span><span class="WHIT">					</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="KEYW">typeof</span><span class="PUNC">(</span><span class="NAME">movieElement</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="STRN">"function"</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>296</span> </span><span class="WHIT">						</span><span class="NAME">movieElement</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>297</span> </span><span class="WHIT">					</span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>298</span> </span><span class="WHIT">				</span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">catch</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">ex1</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>299</span> </span><span class="WHIT">			</span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>300</span> 
<span class='linenumber'>301</span> </span><span class="WHIT">			</span><span class="COMM">// Remove the Movie Element from the page</span><span class="WHIT">
<span class='linenumber'>302</span> </span><span class="WHIT">			</span><span class="KEYW">try</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>303</span> </span><span class="WHIT">				</span><span class="NAME">movieElement.parentNode.removeChild</span><span class="PUNC">(</span><span class="NAME">movieElement</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>304</span> </span><span class="WHIT">			</span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">catch</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">ex</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>305</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>306</span> </span><span class="WHIT">		</span><span class="WHIT">
<span class='linenumber'>307</span> </span><span class="WHIT">		</span><span class="COMM">// Remove IE form fix reference</span><span class="WHIT">
<span class='linenumber'>308</span> </span><span class="WHIT">		</span><span class="NAME">window</span><span class="PUNC">[</span><span class="NAME">this.movieName</span><span class="PUNC">]</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>309</span> 
<span class='linenumber'>310</span> </span><span class="WHIT">		</span><span class="COMM">// Destroy other references</span><span class="WHIT">
<span class='linenumber'>311</span> </span><span class="WHIT">		</span><span class="NAME">SWFUpload.instances</span><span class="PUNC">[</span><span class="NAME">this.movieName</span><span class="PUNC">]</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>312</span> </span><span class="WHIT">		</span><span class="KEYW">delete</span><span class="WHIT"> </span><span class="NAME">SWFUpload.instances</span><span class="PUNC">[</span><span class="NAME">this.movieName</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>313</span> 
<span class='linenumber'>314</span> </span><span class="WHIT">		</span><span class="NAME">this.movieElement</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>315</span> </span><span class="WHIT">		</span><span class="NAME">this.settings</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>316</span> </span><span class="WHIT">		</span><span class="NAME">this.customSettings</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>317</span> </span><span class="WHIT">		</span><span class="NAME">this.eventQueue</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>318</span> </span><span class="WHIT">		</span><span class="NAME">this.movieName</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>319</span> </span><span class="WHIT">		</span><span class="WHIT">
<span class='linenumber'>320</span> </span><span class="WHIT">		</span><span class="WHIT">
<span class='linenumber'>321</span> </span><span class="WHIT">		</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>322</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">catch</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">ex2</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>323</span> </span><span class="WHIT">		</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>324</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>325</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>326</span> 
<span class='linenumber'>327</span> 
<span class='linenumber'>328</span> </span><span class="COMM">// Public: displayDebugInfo prints out settings and configuration</span><span class="WHIT">
<span class='linenumber'>329</span> </span><span class="COMM">// information about this SWFUpload instance.</span><span class="WHIT">
<span class='linenumber'>330</span> </span><span class="COMM">// This function (and any references to it) can be deleted when placing</span><span class="WHIT">
<span class='linenumber'>331</span> </span><span class="COMM">// SWFUpload in production.</span><span class="WHIT">
<span class='linenumber'>332</span> </span><span class="NAME">SWFUpload.prototype.displayDebugInfo</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>333</span> </span><span class="WHIT">	</span><span class="NAME">this.debug</span><span class="PUNC">(</span><span class="WHIT">
<span class='linenumber'>334</span> </span><span class="WHIT">		</span><span class="PUNC">[</span><span class="WHIT">
<span class='linenumber'>335</span> </span><span class="WHIT">			</span><span class="STRN">"---SWFUpload Instance Info---\n"</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>336</span> </span><span class="WHIT">			</span><span class="STRN">"Version: "</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">SWFUpload.version</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"\n"</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>337</span> </span><span class="WHIT">			</span><span class="STRN">"Movie Name: "</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this.movieName</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"\n"</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>338</span> </span><span class="WHIT">			</span><span class="STRN">"Settings:\n"</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>339</span> </span><span class="WHIT">			</span><span class="STRN">"\t"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"upload_url:               "</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this.settings.upload_url</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"\n"</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>340</span> </span><span class="WHIT">			</span><span class="STRN">"\t"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"flash_url:                "</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this.settings.flash_url</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"\n"</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>341</span> </span><span class="WHIT">			</span><span class="STRN">"\t"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"use_query_string:         "</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this.settings.use_query_string.toString</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"\n"</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>342</span> </span><span class="WHIT">			</span><span class="STRN">"\t"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"requeue_on_error:         "</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this.settings.requeue_on_error.toString</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"\n"</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>343</span> </span><span class="WHIT">			</span><span class="STRN">"\t"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"http_success:             "</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this.settings.http_success.join</span><span class="PUNC">(</span><span class="STRN">", "</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"\n"</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>344</span> </span><span class="WHIT">			</span><span class="STRN">"\t"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"file_post_name:           "</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this.settings.file_post_name</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"\n"</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>345</span> </span><span class="WHIT">			</span><span class="STRN">"\t"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"post_params:              "</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this.settings.post_params.toString</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"\n"</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>346</span> </span><span class="WHIT">			</span><span class="STRN">"\t"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"file_types:               "</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this.settings.file_types</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"\n"</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>347</span> </span><span class="WHIT">			</span><span class="STRN">"\t"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"file_types_description:   "</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this.settings.file_types_description</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"\n"</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>348</span> </span><span class="WHIT">			</span><span class="STRN">"\t"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"file_size_limit:          "</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this.settings.file_size_limit</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"\n"</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>349</span> </span><span class="WHIT">			</span><span class="STRN">"\t"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"file_upload_limit:        "</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this.settings.file_upload_limit</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"\n"</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>350</span> </span><span class="WHIT">			</span><span class="STRN">"\t"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"file_queue_limit:         "</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this.settings.file_queue_limit</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"\n"</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>351</span> </span><span class="WHIT">			</span><span class="STRN">"\t"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"debug:                    "</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this.settings.debug.toString</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"\n"</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>352</span> 
<span class='linenumber'>353</span> </span><span class="WHIT">			</span><span class="STRN">"\t"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"prevent_swf_caching:      "</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this.settings.prevent_swf_caching.toString</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"\n"</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>354</span> 
<span class='linenumber'>355</span> </span><span class="WHIT">			</span><span class="STRN">"\t"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"button_placeholder_id:    "</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this.settings.button_placeholder_id.toString</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"\n"</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>356</span> </span><span class="WHIT">			</span><span class="STRN">"\t"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"button_image_url:         "</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this.settings.button_image_url.toString</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"\n"</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>357</span> </span><span class="WHIT">			</span><span class="STRN">"\t"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"button_width:             "</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this.settings.button_width.toString</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"\n"</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>358</span> </span><span class="WHIT">			</span><span class="STRN">"\t"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"button_height:            "</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this.settings.button_height.toString</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"\n"</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>359</span> </span><span class="WHIT">			</span><span class="STRN">"\t"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"button_text:              "</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this.settings.button_text.toString</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"\n"</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>360</span> </span><span class="WHIT">			</span><span class="STRN">"\t"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"button_text_style:        "</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this.settings.button_text_style.toString</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"\n"</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>361</span> </span><span class="WHIT">			</span><span class="STRN">"\t"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"button_text_top_padding:  "</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this.settings.button_text_top_padding.toString</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"\n"</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>362</span> </span><span class="WHIT">			</span><span class="STRN">"\t"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"button_text_left_padding: "</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this.settings.button_text_left_padding.toString</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"\n"</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>363</span> </span><span class="WHIT">			</span><span class="STRN">"\t"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"button_action:            "</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this.settings.button_action.toString</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"\n"</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>364</span> </span><span class="WHIT">			</span><span class="STRN">"\t"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"button_disabled:          "</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this.settings.button_disabled.toString</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"\n"</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>365</span> 
<span class='linenumber'>366</span> </span><span class="WHIT">			</span><span class="STRN">"\t"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"custom_settings:          "</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this.settings.custom_settings.toString</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"\n"</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>367</span> </span><span class="WHIT">			</span><span class="STRN">"Event Handlers:\n"</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>368</span> </span><span class="WHIT">			</span><span class="STRN">"\t"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"swfupload_loaded_handler assigned:  "</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="KEYW">typeof</span><span class="WHIT"> </span><span class="NAME">this.settings.swfupload_loaded_handler</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="STRN">"function"</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">toString</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"\n"</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>369</span> </span><span class="WHIT">			</span><span class="STRN">"\t"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"file_dialog_start_handler assigned: "</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="KEYW">typeof</span><span class="WHIT"> </span><span class="NAME">this.settings.file_dialog_start_handler</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="STRN">"function"</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">toString</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"\n"</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>370</span> </span><span class="WHIT">			</span><span class="STRN">"\t"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"file_queued_handler assigned:       "</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="KEYW">typeof</span><span class="WHIT"> </span><span class="NAME">this.settings.file_queued_handler</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="STRN">"function"</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">toString</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"\n"</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>371</span> </span><span class="WHIT">			</span><span class="STRN">"\t"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"file_queue_error_handler assigned:  "</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="KEYW">typeof</span><span class="WHIT"> </span><span class="NAME">this.settings.file_queue_error_handler</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="STRN">"function"</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">toString</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"\n"</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>372</span> </span><span class="WHIT">			</span><span class="STRN">"\t"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"upload_start_handler assigned:      "</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="KEYW">typeof</span><span class="WHIT"> </span><span class="NAME">this.settings.upload_start_handler</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="STRN">"function"</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">toString</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"\n"</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>373</span> </span><span class="WHIT">			</span><span class="STRN">"\t"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"upload_progress_handler assigned:   "</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="KEYW">typeof</span><span class="WHIT"> </span><span class="NAME">this.settings.upload_progress_handler</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="STRN">"function"</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">toString</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"\n"</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>374</span> </span><span class="WHIT">			</span><span class="STRN">"\t"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"upload_error_handler assigned:      "</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="KEYW">typeof</span><span class="WHIT"> </span><span class="NAME">this.settings.upload_error_handler</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="STRN">"function"</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">toString</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"\n"</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>375</span> </span><span class="WHIT">			</span><span class="STRN">"\t"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"upload_success_handler assigned:    "</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="KEYW">typeof</span><span class="WHIT"> </span><span class="NAME">this.settings.upload_success_handler</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="STRN">"function"</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">toString</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"\n"</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>376</span> </span><span class="WHIT">			</span><span class="STRN">"\t"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"upload_complete_handler assigned:   "</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="KEYW">typeof</span><span class="WHIT"> </span><span class="NAME">this.settings.upload_complete_handler</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="STRN">"function"</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">toString</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"\n"</span><span class="PUNC">,</span><span class="WHIT">
<span class='linenumber'>377</span> </span><span class="WHIT">			</span><span class="STRN">"\t"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"debug_handler assigned:             "</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="KEYW">typeof</span><span class="WHIT"> </span><span class="NAME">this.settings.debug_handler</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="STRN">"function"</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">toString</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"\n"</span><span class="WHIT">
<span class='linenumber'>378</span> </span><span class="WHIT">		</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">join</span><span class="PUNC">(</span><span class="STRN">""</span><span class="PUNC">)</span><span class="WHIT">
<span class='linenumber'>379</span> </span><span class="WHIT">	</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>380</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>381</span> 
<span class='linenumber'>382</span> </span><span class="COMM">/* Note: addSetting and getSetting are no longer used by SWFUpload but are included
<span class='linenumber'>383</span> 	the maintain v2 API compatibility
<span class='linenumber'>384</span> */</span><span class="WHIT">
<span class='linenumber'>385</span> </span><span class="COMM">// Public: (Deprecated) addSetting adds a setting value. If the value given is undefined or null then the default_value is used.</span><span class="WHIT">
<span class='linenumber'>386</span> </span><span class="NAME">SWFUpload.prototype.addSetting</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">name</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">value</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">default_value</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>387</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">value</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="NAME">undefined</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>388</span> </span><span class="WHIT">        </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this.settings</span><span class="PUNC">[</span><span class="NAME">name</span><span class="PUNC">]</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">default_value</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>389</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>390</span> </span><span class="WHIT">        </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this.settings</span><span class="PUNC">[</span><span class="NAME">name</span><span class="PUNC">]</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">value</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>391</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>392</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>393</span> 
<span class='linenumber'>394</span> </span><span class="COMM">// Public: (Deprecated) getSetting gets a setting. Returns an empty string if the setting was not found.</span><span class="WHIT">
<span class='linenumber'>395</span> </span><span class="NAME">SWFUpload.prototype.getSetting</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">name</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>396</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this.settings</span><span class="PUNC">[</span><span class="NAME">name</span><span class="PUNC">]</span><span class="WHIT"> </span><span class="PUNC">!=</span><span class="WHIT"> </span><span class="NAME">undefined</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>397</span> </span><span class="WHIT">        </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.settings</span><span class="PUNC">[</span><span class="NAME">name</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>398</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>399</span> 
<span class='linenumber'>400</span> </span><span class="WHIT">    </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="STRN">""</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>401</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>402</span> 
<span class='linenumber'>403</span> 
<span class='linenumber'>404</span> 
<span class='linenumber'>405</span> </span><span class="COMM">// Private: callFlash handles function calls made to the Flash element.</span><span class="WHIT">
<span class='linenumber'>406</span> </span><span class="COMM">// Calls are made with a setTimeout for some functions to work around</span><span class="WHIT">
<span class='linenumber'>407</span> </span><span class="COMM">// bugs in the ExternalInterface library.</span><span class="WHIT">
<span class='linenumber'>408</span> </span><span class="NAME">SWFUpload.prototype.callFlash</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">functionName</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">argumentArray</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>409</span> </span><span class="WHIT">	</span><span class="NAME">argumentArray</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">argumentArray</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>410</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='linenumber'>411</span> </span><span class="WHIT">	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">movieElement</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.getMovieElement</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>412</span> </span><span class="WHIT">	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">returnValue</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">returnString</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>413</span> 
<span class='linenumber'>414</span> </span><span class="WHIT">	</span><span class="COMM">// Flash's method if calling ExternalInterface methods (code adapted from MooTools).</span><span class="WHIT">
<span class='linenumber'>415</span> </span><span class="WHIT">	</span><span class="KEYW">try</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>416</span> </span><span class="WHIT">		</span><span class="NAME">returnString</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">movieElement.CallFunction</span><span class="PUNC">(</span><span class="STRN">'&lt;invoke name="'</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">functionName</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="STRN">'" returntype="javascript">'</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">__flash__argumentsToXML</span><span class="PUNC">(</span><span class="NAME">argumentArray</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="STRN">'&lt;/invoke>'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>417</span> </span><span class="WHIT">		</span><span class="NAME">returnValue</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">eval</span><span class="PUNC">(</span><span class="NAME">returnString</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>418</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">catch</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">ex</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>419</span> </span><span class="WHIT">		</span><span class="KEYW">throw</span><span class="WHIT"> </span><span class="STRN">"Call to "</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">functionName</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="STRN">" failed"</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>420</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>421</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='linenumber'>422</span> </span><span class="WHIT">	</span><span class="COMM">// Unescape file post param values</span><span class="WHIT">
<span class='linenumber'>423</span> </span><span class="WHIT">	</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">returnValue</span><span class="WHIT"> </span><span class="PUNC">!=</span><span class="WHIT"> </span><span class="NAME">undefined</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="KEYW">typeof</span><span class="WHIT"> </span><span class="NAME">returnValue.post</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="STRN">"object"</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>424</span> </span><span class="WHIT">		</span><span class="NAME">returnValue</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.unescapeFilePostParams</span><span class="PUNC">(</span><span class="NAME">returnValue</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>425</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>426</span> 
<span class='linenumber'>427</span> </span><span class="WHIT">	</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">returnValue</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>428</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>429</span> 
<span class='linenumber'>430</span> 
<span class='linenumber'>431</span> </span><span class="COMM">/* *****************************
<span class='linenumber'>432</span> 	-- Flash control methods --
<span class='linenumber'>433</span> 	Your UI should use these
<span class='linenumber'>434</span> 	to operate SWFUpload
<span class='linenumber'>435</span>    ***************************** */</span><span class="WHIT">
<span class='linenumber'>436</span> 
<span class='linenumber'>437</span> </span><span class="COMM">// WARNING: this function does not work in Flash Player 10</span><span class="WHIT">
<span class='linenumber'>438</span> </span><span class="COMM">// Public: selectFile causes a File Selection Dialog window to appear.  This</span><span class="WHIT">
<span class='linenumber'>439</span> </span><span class="COMM">// dialog only allows 1 file to be selected.</span><span class="WHIT">
<span class='linenumber'>440</span> </span><span class="NAME">SWFUpload.prototype.selectFile</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>441</span> </span><span class="WHIT">	</span><span class="NAME">this.callFlash</span><span class="PUNC">(</span><span class="STRN">"SelectFile"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>442</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>443</span> 
<span class='linenumber'>444</span> </span><span class="COMM">// WARNING: this function does not work in Flash Player 10</span><span class="WHIT">
<span class='linenumber'>445</span> </span><span class="COMM">// Public: selectFiles causes a File Selection Dialog window to appear/ This</span><span class="WHIT">
<span class='linenumber'>446</span> </span><span class="COMM">// dialog allows the user to select any number of files</span><span class="WHIT">
<span class='linenumber'>447</span> </span><span class="COMM">// Flash Bug Warning: Flash limits the number of selectable files based on the combined length of the file names.</span><span class="WHIT">
<span class='linenumber'>448</span> </span><span class="COMM">// If the selection name length is too long the dialog will fail in an unpredictable manner.  There is no work-around</span><span class="WHIT">
<span class='linenumber'>449</span> </span><span class="COMM">// for this bug.</span><span class="WHIT">
<span class='linenumber'>450</span> </span><span class="NAME">SWFUpload.prototype.selectFiles</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>451</span> </span><span class="WHIT">	</span><span class="NAME">this.callFlash</span><span class="PUNC">(</span><span class="STRN">"SelectFiles"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>452</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>453</span> 
<span class='linenumber'>454</span> 
<span class='linenumber'>455</span> </span><span class="COMM">// Public: startUpload starts uploading the first file in the queue unless</span><span class="WHIT">
<span class='linenumber'>456</span> </span><span class="COMM">// the optional parameter 'fileID' specifies the ID </span><span class="WHIT">
<span class='linenumber'>457</span> </span><span class="NAME">SWFUpload.prototype.startUpload</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">fileID</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>458</span> </span><span class="WHIT">	</span><span class="NAME">this.callFlash</span><span class="PUNC">(</span><span class="STRN">"StartUpload"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="NAME">fileID</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>459</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>460</span> 
<span class='linenumber'>461</span> </span><span class="COMM">// Public: cancelUpload cancels any queued file.  The fileID parameter may be the file ID or index.</span><span class="WHIT">
<span class='linenumber'>462</span> </span><span class="COMM">// If you do not specify a fileID the current uploading file or first file in the queue is cancelled.</span><span class="WHIT">
<span class='linenumber'>463</span> </span><span class="COMM">// If you do not want the uploadError event to trigger you can specify false for the triggerErrorEvent parameter.</span><span class="WHIT">
<span class='linenumber'>464</span> </span><span class="NAME">SWFUpload.prototype.cancelUpload</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">fileID</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">triggerErrorEvent</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>465</span> </span><span class="WHIT">	</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">triggerErrorEvent</span><span class="WHIT"> </span><span class="PUNC">!==</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>466</span> </span><span class="WHIT">		</span><span class="NAME">triggerErrorEvent</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>467</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>468</span> </span><span class="WHIT">	</span><span class="NAME">this.callFlash</span><span class="PUNC">(</span><span class="STRN">"CancelUpload"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="NAME">fileID</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">triggerErrorEvent</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>469</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>470</span> 
<span class='linenumber'>471</span> </span><span class="COMM">// Public: stopUpload stops the current upload and requeues the file at the beginning of the queue.</span><span class="WHIT">
<span class='linenumber'>472</span> </span><span class="COMM">// If nothing is currently uploading then nothing happens.</span><span class="WHIT">
<span class='linenumber'>473</span> </span><span class="NAME">SWFUpload.prototype.stopUpload</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>474</span> </span><span class="WHIT">	</span><span class="NAME">this.callFlash</span><span class="PUNC">(</span><span class="STRN">"StopUpload"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>475</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>476</span> 
<span class='linenumber'>477</span> </span><span class="COMM">/* ************************
<span class='linenumber'>478</span>  * Settings methods
<span class='linenumber'>479</span>  *   These methods change the SWFUpload settings.
<span class='linenumber'>480</span>  *   SWFUpload settings should not be changed directly on the settings object
<span class='linenumber'>481</span>  *   since many of the settings need to be passed to Flash in order to take
<span class='linenumber'>482</span>  *   effect.
<span class='linenumber'>483</span>  * *********************** */</span><span class="WHIT">
<span class='linenumber'>484</span> 
<span class='linenumber'>485</span> </span><span class="COMM">// Public: getStats gets the file statistics object.</span><span class="WHIT">
<span class='linenumber'>486</span> </span><span class="NAME">SWFUpload.prototype.getStats</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>487</span> </span><span class="WHIT">	</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.callFlash</span><span class="PUNC">(</span><span class="STRN">"GetStats"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>488</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>489</span> 
<span class='linenumber'>490</span> </span><span class="COMM">// Public: setStats changes the SWFUpload statistics.  You shouldn't need to </span><span class="WHIT">
<span class='linenumber'>491</span> </span><span class="COMM">// change the statistics but you can.  Changing the statistics does not</span><span class="WHIT">
<span class='linenumber'>492</span> </span><span class="COMM">// affect SWFUpload accept for the successful_uploads count which is used</span><span class="WHIT">
<span class='linenumber'>493</span> </span><span class="COMM">// by the upload_limit setting to determine how many files the user may upload.</span><span class="WHIT">
<span class='linenumber'>494</span> </span><span class="NAME">SWFUpload.prototype.setStats</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">statsObject</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>495</span> </span><span class="WHIT">	</span><span class="NAME">this.callFlash</span><span class="PUNC">(</span><span class="STRN">"SetStats"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="NAME">statsObject</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>496</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>497</span> 
<span class='linenumber'>498</span> </span><span class="COMM">// Public: getFile retrieves a File object by ID or Index.  If the file is</span><span class="WHIT">
<span class='linenumber'>499</span> </span><span class="COMM">// not found then 'null' is returned.</span><span class="WHIT">
<span class='linenumber'>500</span> </span><span class="NAME">SWFUpload.prototype.getFile</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">fileID</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>501</span> </span><span class="WHIT">	</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="KEYW">typeof</span><span class="PUNC">(</span><span class="NAME">fileID</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="STRN">"number"</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>502</span> </span><span class="WHIT">		</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.callFlash</span><span class="PUNC">(</span><span class="STRN">"GetFileByIndex"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="NAME">fileID</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>503</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>504</span> </span><span class="WHIT">		</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.callFlash</span><span class="PUNC">(</span><span class="STRN">"GetFile"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="NAME">fileID</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>505</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>506</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>507</span> 
<span class='linenumber'>508</span> </span><span class="COMM">// Public: addFileParam sets a name/value pair that will be posted with the</span><span class="WHIT">
<span class='linenumber'>509</span> </span><span class="COMM">// file specified by the Files ID.  If the name already exists then the</span><span class="WHIT">
<span class='linenumber'>510</span> </span><span class="COMM">// exiting value will be overwritten.</span><span class="WHIT">
<span class='linenumber'>511</span> </span><span class="NAME">SWFUpload.prototype.addFileParam</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">fileID</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">name</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">value</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>512</span> </span><span class="WHIT">	</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.callFlash</span><span class="PUNC">(</span><span class="STRN">"AddFileParam"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="NAME">fileID</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">name</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">value</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>513</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>514</span> 
<span class='linenumber'>515</span> </span><span class="COMM">// Public: removeFileParam removes a previously set (by addFileParam) name/value</span><span class="WHIT">
<span class='linenumber'>516</span> </span><span class="COMM">// pair from the specified file.</span><span class="WHIT">
<span class='linenumber'>517</span> </span><span class="NAME">SWFUpload.prototype.removeFileParam</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">fileID</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">name</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>518</span> </span><span class="WHIT">	</span><span class="NAME">this.callFlash</span><span class="PUNC">(</span><span class="STRN">"RemoveFileParam"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="NAME">fileID</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">name</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>519</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>520</span> 
<span class='linenumber'>521</span> </span><span class="COMM">// Public: setUploadUrl changes the upload_url setting.</span><span class="WHIT">
<span class='linenumber'>522</span> </span><span class="NAME">SWFUpload.prototype.setUploadURL</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">url</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>523</span> </span><span class="WHIT">	</span><span class="NAME">this.settings.upload_url</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">url.toString</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>524</span> </span><span class="WHIT">	</span><span class="NAME">this.callFlash</span><span class="PUNC">(</span><span class="STRN">"SetUploadURL"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="NAME">url</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>525</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>526</span> 
<span class='linenumber'>527</span> </span><span class="COMM">// Public: setPostParams changes the post_params setting</span><span class="WHIT">
<span class='linenumber'>528</span> </span><span class="NAME">SWFUpload.prototype.setPostParams</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">paramsObject</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>529</span> </span><span class="WHIT">	</span><span class="NAME">this.settings.post_params</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">paramsObject</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>530</span> </span><span class="WHIT">	</span><span class="NAME">this.callFlash</span><span class="PUNC">(</span><span class="STRN">"SetPostParams"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="NAME">paramsObject</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>531</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>532</span> 
<span class='linenumber'>533</span> </span><span class="COMM">// Public: addPostParam adds post name/value pair.  Each name can have only one value.</span><span class="WHIT">
<span class='linenumber'>534</span> </span><span class="NAME">SWFUpload.prototype.addPostParam</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">name</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">value</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>535</span> </span><span class="WHIT">	</span><span class="NAME">this.settings.post_params</span><span class="PUNC">[</span><span class="NAME">name</span><span class="PUNC">]</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">value</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>536</span> </span><span class="WHIT">	</span><span class="NAME">this.callFlash</span><span class="PUNC">(</span><span class="STRN">"SetPostParams"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="NAME">this.settings.post_params</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>537</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>538</span> 
<span class='linenumber'>539</span> </span><span class="COMM">// Public: removePostParam deletes post name/value pair.</span><span class="WHIT">
<span class='linenumber'>540</span> </span><span class="NAME">SWFUpload.prototype.removePostParam</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">name</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>541</span> </span><span class="WHIT">	</span><span class="KEYW">delete</span><span class="WHIT"> </span><span class="NAME">this.settings.post_params</span><span class="PUNC">[</span><span class="NAME">name</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>542</span> </span><span class="WHIT">	</span><span class="NAME">this.callFlash</span><span class="PUNC">(</span><span class="STRN">"SetPostParams"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="NAME">this.settings.post_params</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>543</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>544</span> 
<span class='linenumber'>545</span> </span><span class="COMM">// Public: setFileTypes changes the file_types setting and the file_types_description setting</span><span class="WHIT">
<span class='linenumber'>546</span> </span><span class="NAME">SWFUpload.prototype.setFileTypes</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">types</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">description</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>547</span> </span><span class="WHIT">	</span><span class="NAME">this.settings.file_types</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">types</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>548</span> </span><span class="WHIT">	</span><span class="NAME">this.settings.file_types_description</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">description</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>549</span> </span><span class="WHIT">	</span><span class="NAME">this.callFlash</span><span class="PUNC">(</span><span class="STRN">"SetFileTypes"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="NAME">types</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">description</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>550</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>551</span> 
<span class='linenumber'>552</span> </span><span class="COMM">// Public: setFileSizeLimit changes the file_size_limit setting</span><span class="WHIT">
<span class='linenumber'>553</span> </span><span class="NAME">SWFUpload.prototype.setFileSizeLimit</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">fileSizeLimit</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>554</span> </span><span class="WHIT">	</span><span class="NAME">this.settings.file_size_limit</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">fileSizeLimit</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>555</span> </span><span class="WHIT">	</span><span class="NAME">this.callFlash</span><span class="PUNC">(</span><span class="STRN">"SetFileSizeLimit"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="NAME">fileSizeLimit</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>556</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>557</span> 
<span class='linenumber'>558</span> </span><span class="COMM">// Public: setFileUploadLimit changes the file_upload_limit setting</span><span class="WHIT">
<span class='linenumber'>559</span> </span><span class="NAME">SWFUpload.prototype.setFileUploadLimit</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">fileUploadLimit</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>560</span> </span><span class="WHIT">	</span><span class="NAME">this.settings.file_upload_limit</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">fileUploadLimit</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>561</span> </span><span class="WHIT">	</span><span class="NAME">this.callFlash</span><span class="PUNC">(</span><span class="STRN">"SetFileUploadLimit"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="NAME">fileUploadLimit</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>562</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>563</span> 
<span class='linenumber'>564</span> </span><span class="COMM">// Public: setFileQueueLimit changes the file_queue_limit setting</span><span class="WHIT">
<span class='linenumber'>565</span> </span><span class="NAME">SWFUpload.prototype.setFileQueueLimit</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">fileQueueLimit</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>566</span> </span><span class="WHIT">	</span><span class="NAME">this.settings.file_queue_limit</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">fileQueueLimit</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>567</span> </span><span class="WHIT">	</span><span class="NAME">this.callFlash</span><span class="PUNC">(</span><span class="STRN">"SetFileQueueLimit"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="NAME">fileQueueLimit</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>568</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>569</span> 
<span class='linenumber'>570</span> </span><span class="COMM">// Public: setFilePostName changes the file_post_name setting</span><span class="WHIT">
<span class='linenumber'>571</span> </span><span class="NAME">SWFUpload.prototype.setFilePostName</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">filePostName</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>572</span> </span><span class="WHIT">	</span><span class="NAME">this.settings.file_post_name</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">filePostName</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>573</span> </span><span class="WHIT">	</span><span class="NAME">this.callFlash</span><span class="PUNC">(</span><span class="STRN">"SetFilePostName"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="NAME">filePostName</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>574</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>575</span> 
<span class='linenumber'>576</span> </span><span class="COMM">// Public: setUseQueryString changes the use_query_string setting</span><span class="WHIT">
<span class='linenumber'>577</span> </span><span class="NAME">SWFUpload.prototype.setUseQueryString</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">useQueryString</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>578</span> </span><span class="WHIT">	</span><span class="NAME">this.settings.use_query_string</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">useQueryString</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>579</span> </span><span class="WHIT">	</span><span class="NAME">this.callFlash</span><span class="PUNC">(</span><span class="STRN">"SetUseQueryString"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="NAME">useQueryString</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>580</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>581</span> 
<span class='linenumber'>582</span> </span><span class="COMM">// Public: setRequeueOnError changes the requeue_on_error setting</span><span class="WHIT">
<span class='linenumber'>583</span> </span><span class="NAME">SWFUpload.prototype.setRequeueOnError</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">requeueOnError</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>584</span> </span><span class="WHIT">	</span><span class="NAME">this.settings.requeue_on_error</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">requeueOnError</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>585</span> </span><span class="WHIT">	</span><span class="NAME">this.callFlash</span><span class="PUNC">(</span><span class="STRN">"SetRequeueOnError"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="NAME">requeueOnError</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>586</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>587</span> 
<span class='linenumber'>588</span> </span><span class="COMM">// Public: setHTTPSuccess changes the http_success setting</span><span class="WHIT">
<span class='linenumber'>589</span> </span><span class="NAME">SWFUpload.prototype.setHTTPSuccess</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">http_status_codes</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>590</span> </span><span class="WHIT">	</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="KEYW">typeof</span><span class="WHIT"> </span><span class="NAME">http_status_codes</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="STRN">"string"</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>591</span> </span><span class="WHIT">		</span><span class="NAME">http_status_codes</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">http_status_codes.replace</span><span class="PUNC">(</span><span class="STRN">" "</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">""</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">split</span><span class="PUNC">(</span><span class="STRN">","</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>592</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>593</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='linenumber'>594</span> </span><span class="WHIT">	</span><span class="NAME">this.settings.http_success</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">http_status_codes</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>595</span> </span><span class="WHIT">	</span><span class="NAME">this.callFlash</span><span class="PUNC">(</span><span class="STRN">"SetHTTPSuccess"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="NAME">http_status_codes</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>596</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>597</span> 
<span class='linenumber'>598</span> 
<span class='linenumber'>599</span> </span><span class="COMM">// Public: setDebugEnabled changes the debug_enabled setting</span><span class="WHIT">
<span class='linenumber'>600</span> </span><span class="NAME">SWFUpload.prototype.setDebugEnabled</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">debugEnabled</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>601</span> </span><span class="WHIT">	</span><span class="NAME">this.settings.debug_enabled</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">debugEnabled</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>602</span> </span><span class="WHIT">	</span><span class="NAME">this.callFlash</span><span class="PUNC">(</span><span class="STRN">"SetDebugEnabled"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="NAME">debugEnabled</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>603</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>604</span> 
<span class='linenumber'>605</span> </span><span class="COMM">// Public: setButtonImageURL loads a button image sprite</span><span class="WHIT">
<span class='linenumber'>606</span> </span><span class="NAME">SWFUpload.prototype.setButtonImageURL</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">buttonImageURL</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>607</span> </span><span class="WHIT">	</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">buttonImageURL</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="NAME">undefined</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>608</span> </span><span class="WHIT">		</span><span class="NAME">buttonImageURL</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">""</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>609</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>610</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='linenumber'>611</span> </span><span class="WHIT">	</span><span class="NAME">this.settings.button_image_url</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">buttonImageURL</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>612</span> </span><span class="WHIT">	</span><span class="NAME">this.callFlash</span><span class="PUNC">(</span><span class="STRN">"SetButtonImageURL"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="NAME">buttonImageURL</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>613</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>614</span> 
<span class='linenumber'>615</span> </span><span class="COMM">// Public: setButtonDimensions resizes the Flash Movie and button</span><span class="WHIT">
<span class='linenumber'>616</span> </span><span class="NAME">SWFUpload.prototype.setButtonDimensions</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">width</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">height</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>617</span> </span><span class="WHIT">	</span><span class="NAME">this.settings.button_width</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">width</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>618</span> </span><span class="WHIT">	</span><span class="NAME">this.settings.button_height</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">height</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>619</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='linenumber'>620</span> </span><span class="WHIT">	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">movie</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.getMovieElement</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>621</span> </span><span class="WHIT">	</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">movie</span><span class="WHIT"> </span><span class="PUNC">!=</span><span class="WHIT"> </span><span class="NAME">undefined</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>622</span> </span><span class="WHIT">		</span><span class="NAME">movie.style.width</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">width</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="STRN">"px"</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>623</span> </span><span class="WHIT">		</span><span class="NAME">movie.style.height</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">height</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="STRN">"px"</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>624</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>625</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='linenumber'>626</span> </span><span class="WHIT">	</span><span class="NAME">this.callFlash</span><span class="PUNC">(</span><span class="STRN">"SetButtonDimensions"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="NAME">width</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">height</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>627</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>628</span> </span><span class="COMM">// Public: setButtonText Changes the text overlaid on the button</span><span class="WHIT">
<span class='linenumber'>629</span> </span><span class="NAME">SWFUpload.prototype.setButtonText</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">html</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>630</span> </span><span class="WHIT">	</span><span class="NAME">this.settings.button_text</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">html</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>631</span> </span><span class="WHIT">	</span><span class="NAME">this.callFlash</span><span class="PUNC">(</span><span class="STRN">"SetButtonText"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="NAME">html</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>632</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>633</span> </span><span class="COMM">// Public: setButtonTextPadding changes the top and left padding of the text overlay</span><span class="WHIT">
<span class='linenumber'>634</span> </span><span class="NAME">SWFUpload.prototype.setButtonTextPadding</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">left</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">top</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>635</span> </span><span class="WHIT">	</span><span class="NAME">this.settings.button_text_top_padding</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">top</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>636</span> </span><span class="WHIT">	</span><span class="NAME">this.settings.button_text_left_padding</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">left</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>637</span> </span><span class="WHIT">	</span><span class="NAME">this.callFlash</span><span class="PUNC">(</span><span class="STRN">"SetButtonTextPadding"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="NAME">left</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">top</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>638</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>639</span> 
<span class='linenumber'>640</span> </span><span class="COMM">// Public: setButtonTextStyle changes the CSS used to style the HTML/Text overlaid on the button</span><span class="WHIT">
<span class='linenumber'>641</span> </span><span class="NAME">SWFUpload.prototype.setButtonTextStyle</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">css</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>642</span> </span><span class="WHIT">	</span><span class="NAME">this.settings.button_text_style</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">css</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>643</span> </span><span class="WHIT">	</span><span class="NAME">this.callFlash</span><span class="PUNC">(</span><span class="STRN">"SetButtonTextStyle"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="NAME">css</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>644</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>645</span> </span><span class="COMM">// Public: setButtonDisabled disables/enables the button</span><span class="WHIT">
<span class='linenumber'>646</span> </span><span class="NAME">SWFUpload.prototype.setButtonDisabled</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">isDisabled</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>647</span> </span><span class="WHIT">	</span><span class="NAME">this.settings.button_disabled</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">isDisabled</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>648</span> </span><span class="WHIT">	</span><span class="NAME">this.callFlash</span><span class="PUNC">(</span><span class="STRN">"SetButtonDisabled"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="NAME">isDisabled</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>649</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>650</span> </span><span class="COMM">// Public: setButtonAction sets the action that occurs when the button is clicked</span><span class="WHIT">
<span class='linenumber'>651</span> </span><span class="NAME">SWFUpload.prototype.setButtonAction</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">buttonAction</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>652</span> </span><span class="WHIT">	</span><span class="NAME">this.settings.button_action</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">buttonAction</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>653</span> </span><span class="WHIT">	</span><span class="NAME">this.callFlash</span><span class="PUNC">(</span><span class="STRN">"SetButtonAction"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="NAME">buttonAction</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>654</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>655</span> 
<span class='linenumber'>656</span> </span><span class="COMM">// Public: setButtonCursor changes the mouse cursor displayed when hovering over the button</span><span class="WHIT">
<span class='linenumber'>657</span> </span><span class="NAME">SWFUpload.prototype.setButtonCursor</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">cursor</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>658</span> </span><span class="WHIT">	</span><span class="NAME">this.settings.button_cursor</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">cursor</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>659</span> </span><span class="WHIT">	</span><span class="NAME">this.callFlash</span><span class="PUNC">(</span><span class="STRN">"SetButtonCursor"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="NAME">cursor</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>660</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>661</span> 
<span class='linenumber'>662</span> </span><span class="COMM">/* *******************************
<span class='linenumber'>663</span> 	Flash Event Interfaces
<span class='linenumber'>664</span> 	These functions are used by Flash to trigger the various
<span class='linenumber'>665</span> 	events.
<span class='linenumber'>666</span> 	
<span class='linenumber'>667</span> 	All these functions a Private.
<span class='linenumber'>668</span> 	
<span class='linenumber'>669</span> 	Because the ExternalInterface library is buggy the event calls
<span class='linenumber'>670</span> 	are added to a queue and the queue then executed by a setTimeout.
<span class='linenumber'>671</span> 	This ensures that events are executed in a determinate order and that
<span class='linenumber'>672</span> 	the ExternalInterface bugs are avoided.
<span class='linenumber'>673</span> ******************************* */</span><span class="WHIT">
<span class='linenumber'>674</span> 
<span class='linenumber'>675</span> </span><span class="NAME">SWFUpload.prototype.queueEvent</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">handlerName</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">argumentArray</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>676</span> </span><span class="WHIT">	</span><span class="COMM">// Warning: Don't call this.debug inside here or you'll create an infinite loop</span><span class="WHIT">
<span class='linenumber'>677</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='linenumber'>678</span> </span><span class="WHIT">	</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">argumentArray</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="NAME">undefined</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>679</span> </span><span class="WHIT">		</span><span class="NAME">argumentArray</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>680</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="PUNC">(</span><span class="NAME">argumentArray</span><span class="WHIT"> </span><span class="KEYW">instanceof</span><span class="WHIT"> </span><span class="NAME">Array</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>681</span> </span><span class="WHIT">		</span><span class="NAME">argumentArray</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="NAME">argumentArray</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>682</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>683</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='linenumber'>684</span> </span><span class="WHIT">	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">self</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>685</span> </span><span class="WHIT">	</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="KEYW">typeof</span><span class="WHIT"> </span><span class="NAME">this.settings</span><span class="PUNC">[</span><span class="NAME">handlerName</span><span class="PUNC">]</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="STRN">"function"</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>686</span> </span><span class="WHIT">		</span><span class="COMM">// Queue the event</span><span class="WHIT">
<span class='linenumber'>687</span> </span><span class="WHIT">		</span><span class="NAME">this.eventQueue.push</span><span class="PUNC">(</span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>688</span> </span><span class="WHIT">			</span><span class="NAME">this.settings</span><span class="PUNC">[</span><span class="NAME">handlerName</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">apply</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">argumentArray</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>689</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>690</span> </span><span class="WHIT">		</span><span class="WHIT">
<span class='linenumber'>691</span> </span><span class="WHIT">		</span><span class="COMM">// Execute the next queued event</span><span class="WHIT">
<span class='linenumber'>692</span> </span><span class="WHIT">		</span><span class="NAME">setTimeout</span><span class="PUNC">(</span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>693</span> </span><span class="WHIT">			</span><span class="NAME">self.executeNextEvent</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>694</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>695</span> </span><span class="WHIT">		</span><span class="WHIT">
<span class='linenumber'>696</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this.settings</span><span class="PUNC">[</span><span class="NAME">handlerName</span><span class="PUNC">]</span><span class="WHIT"> </span><span class="PUNC">!==</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>697</span> </span><span class="WHIT">		</span><span class="KEYW">throw</span><span class="WHIT"> </span><span class="STRN">"Event handler "</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">handlerName</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="STRN">" is unknown or is not a function"</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>698</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>699</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>700</span> 
<span class='linenumber'>701</span> </span><span class="COMM">// Private: Causes the next event in the queue to be executed.  Since events are queued using a setTimeout</span><span class="WHIT">
<span class='linenumber'>702</span> </span><span class="COMM">// we must queue them in order to garentee that they are executed in order.</span><span class="WHIT">
<span class='linenumber'>703</span> </span><span class="NAME">SWFUpload.prototype.executeNextEvent</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>704</span> </span><span class="WHIT">	</span><span class="COMM">// Warning: Don't call this.debug inside here or you'll create an infinite loop</span><span class="WHIT">
<span class='linenumber'>705</span> 
<span class='linenumber'>706</span> </span><span class="WHIT">	</span><span class="KEYW">var</span><span class="WHIT">  </span><span class="NAME">f</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.eventQueue</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="NAME">this.eventQueue.shift</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>707</span> </span><span class="WHIT">	</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="KEYW">typeof</span><span class="PUNC">(</span><span class="NAME">f</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="STRN">"function"</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>708</span> </span><span class="WHIT">		</span><span class="NAME">f.apply</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>709</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>710</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>711</span> 
<span class='linenumber'>712</span> </span><span class="COMM">// Private: unescapeFileParams is part of a workaround for a flash bug where objects passed through ExternalInterface cannot have</span><span class="WHIT">
<span class='linenumber'>713</span> </span><span class="COMM">// properties that contain characters that are not valid for JavaScript identifiers. To work around this</span><span class="WHIT">
<span class='linenumber'>714</span> </span><span class="COMM">// the Flash Component escapes the parameter names and we must unescape again before passing them along.</span><span class="WHIT">
<span class='linenumber'>715</span> </span><span class="NAME">SWFUpload.prototype.unescapeFilePostParams</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">file</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>716</span> </span><span class="WHIT">	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">reg</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="REGX">/[$]([0-9a-f]{4})/i</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>717</span> </span><span class="WHIT">	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">unescapedPost</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>718</span> </span><span class="WHIT">	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">uk</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>719</span> 
<span class='linenumber'>720</span> </span><span class="WHIT">	</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">file</span><span class="WHIT"> </span><span class="PUNC">!=</span><span class="WHIT"> </span><span class="NAME">undefined</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>721</span> </span><span class="WHIT">		</span><span class="KEYW">for</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">k</span><span class="WHIT"> </span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">file.post</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>722</span> </span><span class="WHIT">			</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">file.post.hasOwnProperty</span><span class="PUNC">(</span><span class="NAME">k</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>723</span> </span><span class="WHIT">				</span><span class="NAME">uk</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">k</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>724</span> </span><span class="WHIT">				</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">match</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>725</span> </span><span class="WHIT">				</span><span class="KEYW">while</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">(</span><span class="NAME">match</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">reg.exec</span><span class="PUNC">(</span><span class="NAME">uk</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">!==</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>726</span> </span><span class="WHIT">					</span><span class="NAME">uk</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">uk.replace</span><span class="PUNC">(</span><span class="NAME">match</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">String.fromCharCode</span><span class="PUNC">(</span><span class="NAME">parseInt</span><span class="PUNC">(</span><span class="STRN">"0x"</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">match</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NUMB">16</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>727</span> </span><span class="WHIT">				</span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>728</span> </span><span class="WHIT">				</span><span class="NAME">unescapedPost</span><span class="PUNC">[</span><span class="NAME">uk</span><span class="PUNC">]</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">file.post</span><span class="PUNC">[</span><span class="NAME">k</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>729</span> </span><span class="WHIT">			</span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>730</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>731</span> 
<span class='linenumber'>732</span> </span><span class="WHIT">		</span><span class="NAME">file.post</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">unescapedPost</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>733</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>734</span> 
<span class='linenumber'>735</span> </span><span class="WHIT">	</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">file</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>736</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>737</span> 
<span class='linenumber'>738</span> </span><span class="COMM">// Private: Called by Flash to see if JS can call in to Flash (test if External Interface is working)</span><span class="WHIT">
<span class='linenumber'>739</span> </span><span class="NAME">SWFUpload.prototype.testExternalInterface</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>740</span> </span><span class="WHIT">	</span><span class="KEYW">try</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>741</span> </span><span class="WHIT">		</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.callFlash</span><span class="PUNC">(</span><span class="STRN">"TestExternalInterface"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>742</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">catch</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">ex</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>743</span> </span><span class="WHIT">		</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>744</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>745</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>746</span> 
<span class='linenumber'>747</span> </span><span class="COMM">// Private: This event is called by Flash when it has finished loading. Don't modify this.</span><span class="WHIT">
<span class='linenumber'>748</span> </span><span class="COMM">// Use the swfupload_loaded_handler event setting to execute custom code when SWFUpload has loaded.</span><span class="WHIT">
<span class='linenumber'>749</span> </span><span class="NAME">SWFUpload.prototype.flashReady</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>750</span> </span><span class="WHIT">	</span><span class="COMM">// Check that the movie element is loaded correctly with its ExternalInterface methods defined</span><span class="WHIT">
<span class='linenumber'>751</span> </span><span class="WHIT">	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">movieElement</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.getMovieElement</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>752</span> 
<span class='linenumber'>753</span> </span><span class="WHIT">	</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">movieElement</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>754</span> </span><span class="WHIT">		</span><span class="NAME">this.debug</span><span class="PUNC">(</span><span class="STRN">"Flash called back ready but the flash movie can't be found."</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>755</span> </span><span class="WHIT">		</span><span class="KEYW">return</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>756</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>757</span> 
<span class='linenumber'>758</span> </span><span class="WHIT">	</span><span class="NAME">this.cleanUp</span><span class="PUNC">(</span><span class="NAME">movieElement</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>759</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='linenumber'>760</span> </span><span class="WHIT">	</span><span class="NAME">this.queueEvent</span><span class="PUNC">(</span><span class="STRN">"swfupload_loaded_handler"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>761</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>762</span> 
<span class='linenumber'>763</span> </span><span class="COMM">// Private: removes Flash added fuctions to the DOM node to prevent memory leaks in IE.</span><span class="WHIT">
<span class='linenumber'>764</span> </span><span class="COMM">// This function is called by Flash each time the ExternalInterface functions are created.</span><span class="WHIT">
<span class='linenumber'>765</span> </span><span class="NAME">SWFUpload.prototype.cleanUp</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">movieElement</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>766</span> </span><span class="WHIT">	</span><span class="COMM">// Pro-actively unhook all the Flash functions</span><span class="WHIT">
<span class='linenumber'>767</span> </span><span class="WHIT">	</span><span class="KEYW">try</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>768</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this.movieElement</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="KEYW">typeof</span><span class="PUNC">(</span><span class="NAME">movieElement.CallFunction</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="STRN">"unknown"</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT"> </span><span class="COMM">// We only want to do this in IE</span><span class="WHIT">
<span class='linenumber'>769</span> </span><span class="WHIT">			</span><span class="NAME">this.debug</span><span class="PUNC">(</span><span class="STRN">"Removing Flash functions hooks (this should only run in IE and should prevent memory leaks)"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>770</span> </span><span class="WHIT">			</span><span class="KEYW">for</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">key</span><span class="WHIT"> </span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">movieElement</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>771</span> </span><span class="WHIT">				</span><span class="KEYW">try</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>772</span> </span><span class="WHIT">					</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="KEYW">typeof</span><span class="PUNC">(</span><span class="NAME">movieElement</span><span class="PUNC">[</span><span class="NAME">key</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="STRN">"function"</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>773</span> </span><span class="WHIT">						</span><span class="NAME">movieElement</span><span class="PUNC">[</span><span class="NAME">key</span><span class="PUNC">]</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>774</span> </span><span class="WHIT">					</span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>775</span> </span><span class="WHIT">				</span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">catch</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">ex</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>776</span> </span><span class="WHIT">				</span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>777</span> </span><span class="WHIT">			</span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>778</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>779</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">catch</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">ex1</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>780</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='linenumber'>781</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>782</span> 
<span class='linenumber'>783</span> </span><span class="WHIT">	</span><span class="COMM">// Fix Flashes own cleanup code so if the SWFMovie was removed from the page</span><span class="WHIT">
<span class='linenumber'>784</span> </span><span class="WHIT">	</span><span class="COMM">// it doesn't display errors.</span><span class="WHIT">
<span class='linenumber'>785</span> </span><span class="WHIT">	</span><span class="NAME">window</span><span class="PUNC">[</span><span class="STRN">"__flash__removeCallback"</span><span class="PUNC">]</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">instance</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">name</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>786</span> </span><span class="WHIT">		</span><span class="KEYW">try</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>787</span> </span><span class="WHIT">			</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">instance</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>788</span> </span><span class="WHIT">				</span><span class="NAME">instance</span><span class="PUNC">[</span><span class="NAME">name</span><span class="PUNC">]</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>789</span> </span><span class="WHIT">			</span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>790</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">catch</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">flashEx</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>791</span> </span><span class="WHIT">		</span><span class="WHIT">
<span class='linenumber'>792</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>793</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>794</span> 
<span class='linenumber'>795</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>796</span> 
<span class='linenumber'>797</span> 
<span class='linenumber'>798</span> </span><span class="COMM">/* This is a chance to do something before the browse window opens */</span><span class="WHIT">
<span class='linenumber'>799</span> </span><span class="NAME">SWFUpload.prototype.fileDialogStart</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>800</span> </span><span class="WHIT">	</span><span class="NAME">this.queueEvent</span><span class="PUNC">(</span><span class="STRN">"file_dialog_start_handler"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>801</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>802</span> 
<span class='linenumber'>803</span> 
<span class='linenumber'>804</span> </span><span class="COMM">/* Called when a file is successfully added to the queue. */</span><span class="WHIT">
<span class='linenumber'>805</span> </span><span class="NAME">SWFUpload.prototype.fileQueued</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">file</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>806</span> </span><span class="WHIT">	</span><span class="NAME">file</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.unescapeFilePostParams</span><span class="PUNC">(</span><span class="NAME">file</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>807</span> </span><span class="WHIT">	</span><span class="NAME">this.queueEvent</span><span class="PUNC">(</span><span class="STRN">"file_queued_handler"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">file</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>808</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>809</span> 
<span class='linenumber'>810</span> 
<span class='linenumber'>811</span> </span><span class="COMM">/* Handle errors that occur when an attempt to queue a file fails. */</span><span class="WHIT">
<span class='linenumber'>812</span> </span><span class="NAME">SWFUpload.prototype.fileQueueError</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">file</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">errorCode</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">message</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>813</span> </span><span class="WHIT">	</span><span class="NAME">file</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.unescapeFilePostParams</span><span class="PUNC">(</span><span class="NAME">file</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>814</span> </span><span class="WHIT">	</span><span class="NAME">this.queueEvent</span><span class="PUNC">(</span><span class="STRN">"file_queue_error_handler"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="NAME">file</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">errorCode</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">message</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>815</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>816</span> 
<span class='linenumber'>817</span> </span><span class="COMM">/* Called after the file dialog has closed and the selected files have been queued.
<span class='linenumber'>818</span> 	You could call startUpload here if you want the queued files to begin uploading immediately. */</span><span class="WHIT">
<span class='linenumber'>819</span> </span><span class="NAME">SWFUpload.prototype.fileDialogComplete</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">numFilesSelected</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">numFilesQueued</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>820</span> </span><span class="WHIT">	</span><span class="NAME">this.queueEvent</span><span class="PUNC">(</span><span class="STRN">"file_dialog_complete_handler"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="NAME">numFilesSelected</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">numFilesQueued</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>821</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>822</span> 
<span class='linenumber'>823</span> </span><span class="NAME">SWFUpload.prototype.uploadStart</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">file</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>824</span> </span><span class="WHIT">	</span><span class="NAME">file</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.unescapeFilePostParams</span><span class="PUNC">(</span><span class="NAME">file</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>825</span> </span><span class="WHIT">	</span><span class="NAME">this.queueEvent</span><span class="PUNC">(</span><span class="STRN">"return_upload_start_handler"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">file</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>826</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>827</span> 
<span class='linenumber'>828</span> </span><span class="NAME">SWFUpload.prototype.returnUploadStart</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">file</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>829</span> </span><span class="WHIT">	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">returnValue</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>830</span> </span><span class="WHIT">	</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="KEYW">typeof</span><span class="WHIT"> </span><span class="NAME">this.settings.upload_start_handler</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="STRN">"function"</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>831</span> </span><span class="WHIT">		</span><span class="NAME">file</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.unescapeFilePostParams</span><span class="PUNC">(</span><span class="NAME">file</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>832</span> </span><span class="WHIT">		</span><span class="NAME">returnValue</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.settings.upload_start_handler.call</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">file</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>833</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this.settings.upload_start_handler</span><span class="WHIT"> </span><span class="PUNC">!=</span><span class="WHIT"> </span><span class="NAME">undefined</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>834</span> </span><span class="WHIT">		</span><span class="KEYW">throw</span><span class="WHIT"> </span><span class="STRN">"upload_start_handler must be a function"</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>835</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>836</span> 
<span class='linenumber'>837</span> </span><span class="WHIT">	</span><span class="COMM">// Convert undefined to true so if nothing is returned from the upload_start_handler it is</span><span class="WHIT">
<span class='linenumber'>838</span> </span><span class="WHIT">	</span><span class="COMM">// interpretted as 'true'.</span><span class="WHIT">
<span class='linenumber'>839</span> </span><span class="WHIT">	</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">returnValue</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="NAME">undefined</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>840</span> </span><span class="WHIT">		</span><span class="NAME">returnValue</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>841</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>842</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='linenumber'>843</span> </span><span class="WHIT">	</span><span class="NAME">returnValue</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">!</span><span class="PUNC">!</span><span class="NAME">returnValue</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>844</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='linenumber'>845</span> </span><span class="WHIT">	</span><span class="NAME">this.callFlash</span><span class="PUNC">(</span><span class="STRN">"ReturnUploadStart"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="NAME">returnValue</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>846</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>847</span> 
<span class='linenumber'>848</span> 
<span class='linenumber'>849</span> 
<span class='linenumber'>850</span> </span><span class="NAME">SWFUpload.prototype.uploadProgress</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">file</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">bytesComplete</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">bytesTotal</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>851</span> </span><span class="WHIT">	</span><span class="NAME">file</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.unescapeFilePostParams</span><span class="PUNC">(</span><span class="NAME">file</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>852</span> </span><span class="WHIT">	</span><span class="NAME">this.queueEvent</span><span class="PUNC">(</span><span class="STRN">"upload_progress_handler"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="NAME">file</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">bytesComplete</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">bytesTotal</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>853</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>854</span> 
<span class='linenumber'>855</span> </span><span class="NAME">SWFUpload.prototype.uploadError</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">file</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">errorCode</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">message</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>856</span> </span><span class="WHIT">	</span><span class="NAME">file</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.unescapeFilePostParams</span><span class="PUNC">(</span><span class="NAME">file</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>857</span> </span><span class="WHIT">	</span><span class="NAME">this.queueEvent</span><span class="PUNC">(</span><span class="STRN">"upload_error_handler"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="NAME">file</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">errorCode</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">message</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>858</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>859</span> 
<span class='linenumber'>860</span> </span><span class="NAME">SWFUpload.prototype.uploadSuccess</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">file</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">serverData</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>861</span> </span><span class="WHIT">	</span><span class="NAME">file</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.unescapeFilePostParams</span><span class="PUNC">(</span><span class="NAME">file</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>862</span> </span><span class="WHIT">	</span><span class="NAME">this.queueEvent</span><span class="PUNC">(</span><span class="STRN">"upload_success_handler"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="NAME">file</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">serverData</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>863</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>864</span> 
<span class='linenumber'>865</span> </span><span class="NAME">SWFUpload.prototype.uploadComplete</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">file</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>866</span> </span><span class="WHIT">	</span><span class="NAME">file</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.unescapeFilePostParams</span><span class="PUNC">(</span><span class="NAME">file</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>867</span> </span><span class="WHIT">	</span><span class="NAME">this.queueEvent</span><span class="PUNC">(</span><span class="STRN">"upload_complete_handler"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">file</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>868</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>869</span> 
<span class='linenumber'>870</span> </span><span class="COMM">/* Called by SWFUpload JavaScript and Flash functions when debug is enabled. By default it writes messages to the
<span class='linenumber'>871</span>    internal debug console.  You can override this event and have messages written where you want. */</span><span class="WHIT">
<span class='linenumber'>872</span> </span><span class="NAME">SWFUpload.prototype.debug</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">message</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>873</span> </span><span class="WHIT">	</span><span class="NAME">this.queueEvent</span><span class="PUNC">(</span><span class="STRN">"debug_handler"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">message</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>874</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>875</span> 
<span class='linenumber'>876</span> 
<span class='linenumber'>877</span> </span><span class="COMM">/* **********************************
<span class='linenumber'>878</span> 	Debug Console
<span class='linenumber'>879</span> 	The debug console is a self contained, in page location
<span class='linenumber'>880</span> 	for debug message to be sent.  The Debug Console adds
<span class='linenumber'>881</span> 	itself to the body if necessary.
<span class='linenumber'>882</span> 
<span class='linenumber'>883</span> 	The console is automatically scrolled as messages appear.
<span class='linenumber'>884</span> 	
<span class='linenumber'>885</span> 	If you are using your own debug handler or when you deploy to production and
<span class='linenumber'>886</span> 	have debug disabled you can remove these functions to reduce the file size
<span class='linenumber'>887</span> 	and complexity.
<span class='linenumber'>888</span> ********************************** */</span><span class="WHIT">
<span class='linenumber'>889</span> </span><span class="WHIT">   </span><span class="WHIT">
<span class='linenumber'>890</span> </span><span class="COMM">// Private: debugMessage is the default debug_handler.  If you want to print debug messages</span><span class="WHIT">
<span class='linenumber'>891</span> </span><span class="COMM">// call the debug() function.  When overriding the function your own function should</span><span class="WHIT">
<span class='linenumber'>892</span> </span><span class="COMM">// check to see if the debug setting is true before outputting debug information.</span><span class="WHIT">
<span class='linenumber'>893</span> </span><span class="NAME">SWFUpload.prototype.debugMessage</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">message</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>894</span> </span><span class="WHIT">	</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this.settings.debug</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>895</span> </span><span class="WHIT">		</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">exceptionMessage</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">exceptionValues</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>896</span> 
<span class='linenumber'>897</span> </span><span class="WHIT">		</span><span class="COMM">// Check for an exception object and print it nicely</span><span class="WHIT">
<span class='linenumber'>898</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="KEYW">typeof</span><span class="WHIT"> </span><span class="NAME">message</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="STRN">"object"</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="KEYW">typeof</span><span class="WHIT"> </span><span class="NAME">message.name</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="STRN">"string"</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="KEYW">typeof</span><span class="WHIT"> </span><span class="NAME">message.message</span><span class="WHIT"> </span><span class="PUNC">===</span><span class="WHIT"> </span><span class="STRN">"string"</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>899</span> </span><span class="WHIT">			</span><span class="KEYW">for</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">key</span><span class="WHIT"> </span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">message</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>900</span> </span><span class="WHIT">				</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">message.hasOwnProperty</span><span class="PUNC">(</span><span class="NAME">key</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>901</span> </span><span class="WHIT">					</span><span class="NAME">exceptionValues.push</span><span class="PUNC">(</span><span class="NAME">key</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="STRN">": "</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">message</span><span class="PUNC">[</span><span class="NAME">key</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>902</span> </span><span class="WHIT">				</span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>903</span> </span><span class="WHIT">			</span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>904</span> </span><span class="WHIT">			</span><span class="NAME">exceptionMessage</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">exceptionValues.join</span><span class="PUNC">(</span><span class="STRN">"\n"</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="STRN">""</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>905</span> </span><span class="WHIT">			</span><span class="NAME">exceptionValues</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">exceptionMessage.split</span><span class="PUNC">(</span><span class="STRN">"\n"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>906</span> </span><span class="WHIT">			</span><span class="NAME">exceptionMessage</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">"EXCEPTION: "</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">exceptionValues.join</span><span class="PUNC">(</span><span class="STRN">"\nEXCEPTION: "</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>907</span> </span><span class="WHIT">			</span><span class="NAME">SWFUpload.Console.writeLine</span><span class="PUNC">(</span><span class="NAME">exceptionMessage</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>908</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>909</span> </span><span class="WHIT">			</span><span class="NAME">SWFUpload.Console.writeLine</span><span class="PUNC">(</span><span class="NAME">message</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>910</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>911</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>912</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>913</span> 
<span class='linenumber'>914</span> </span><span class="NAME">SWFUpload.Console</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>915</span> </span><span class="NAME">SWFUpload.Console.writeLine</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">message</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>916</span> </span><span class="WHIT">	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">console</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">documentForm</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>917</span> 
<span class='linenumber'>918</span> </span><span class="WHIT">	</span><span class="KEYW">try</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>919</span> </span><span class="WHIT">		</span><span class="NAME">console</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">document.getElementById</span><span class="PUNC">(</span><span class="STRN">"SWFUpload_Console"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>920</span> 
<span class='linenumber'>921</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">console</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>922</span> </span><span class="WHIT">			</span><span class="NAME">documentForm</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">document.createElement</span><span class="PUNC">(</span><span class="STRN">"form"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>923</span> </span><span class="WHIT">			</span><span class="NAME">document.getElementsByTagName</span><span class="PUNC">(</span><span class="STRN">"body"</span><span class="PUNC">)</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">appendChild</span><span class="PUNC">(</span><span class="NAME">documentForm</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>924</span> 
<span class='linenumber'>925</span> </span><span class="WHIT">			</span><span class="NAME">console</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">document.createElement</span><span class="PUNC">(</span><span class="STRN">"textarea"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>926</span> </span><span class="WHIT">			</span><span class="NAME">console.id</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">"SWFUpload_Console"</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>927</span> </span><span class="WHIT">			</span><span class="NAME">console.style.fontFamily</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">"monospace"</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>928</span> </span><span class="WHIT">			</span><span class="NAME">console.setAttribute</span><span class="PUNC">(</span><span class="STRN">"wrap"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"off"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>929</span> </span><span class="WHIT">			</span><span class="NAME">console.wrap</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">"off"</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>930</span> </span><span class="WHIT">			</span><span class="NAME">console.style.overflow</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">"auto"</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>931</span> </span><span class="WHIT">			</span><span class="NAME">console.style.width</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">"700px"</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>932</span> </span><span class="WHIT">			</span><span class="NAME">console.style.height</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">"350px"</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>933</span> </span><span class="WHIT">			</span><span class="NAME">console.style.margin</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">"5px"</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>934</span> </span><span class="WHIT">			</span><span class="NAME">documentForm.appendChild</span><span class="PUNC">(</span><span class="NAME">console</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>935</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>936</span> 
<span class='linenumber'>937</span> </span><span class="WHIT">		</span><span class="NAME">console.value</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">message</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="STRN">"\n"</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>938</span> 
<span class='linenumber'>939</span> </span><span class="WHIT">		</span><span class="NAME">console.scrollTop</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">console.scrollHeight</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="NAME">console.clientHeight</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>940</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">catch</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">ex</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='linenumber'>941</span> </span><span class="WHIT">		</span><span class="NAME">alert</span><span class="PUNC">(</span><span class="STRN">"Exception: "</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">ex.name</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="STRN">" Message: "</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">ex.message</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>942</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="WHIT">
<span class='linenumber'>943</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='linenumber'>944</span> </span></pre></body></html>